## Опции

Для всех примеров используются следующии опции:      
![image](https://github.com/user-attachments/assets/b9c5a2b3-4612-4ec9-bb99-a5c759132271)       
Увидеть опции можно с помощью флага **-h**:     
```bash
./examples/usrp_example -h
```

Только для **usrp_rx_to_file** обязательная опция **--file_rx**, пример:
```bash
sudo ./examples/usrp_rx_to_file --file_rx=/tmp/rxdata0.pcm
```
где после **file_rx** задается путь до файла, в который будем записывать данные с USRP           

Только для **usrp_tx_from_file** обязательная опция **--file_tx**, пример:     
```bash
sudo ./examples/usrp_tx_from_file --file_rx=/tmp/txdata0.pcm
```
где после **file_tx** идет путь до файла, с которого будем читать данные       

Для остальных примеров эти опции не используются      

**При записи для больших sample rate код не будет успевать, т.к. запись происходит в том же потоке, что и чтение с USRP. Тоже самое касается и tx примера**    

## Код
Разберем example/usrp_example.c

### Инициализация

- **parse_config()** - Парсит входные аргументы программы и применяет их. В случае отсутствия аргументов применяет значения по умолчанию, которые можно увидеть запустив программу с ключом -h
- **log_init()** - Инициализация логов. Реализация логов здесь простая и само логирование сделано в том же потоке, что их и вызывает, таким образом при достаточно частом выводе логов на экран поток может замедляться
- **hw_config_init()** - Заполняются структуры **hw_config_t hw_config** и **trx_proc_t proc**. hw_config необходим для инициализации структуры hw_device rfdevice для работы с USRP. Структура proc нужна для передачи/приема и обработки данных с USRP

### Функции с USRP

- **device_init()** - Инициализирует rfdevice структуру параметрами из hw_device, а также готовим USRP к работе. После инициализации USRP будет залочена за нами
- **ru_start()** - Запуск USRP
- **trx_stop_func()** - Остановка USRP
- **trx_read_func()** - Прием данных из USRP, блокирующая ф-ия, т.к. будем ждать пока заданное кол-во данных нами не прилетит из воздуха через антенну
- **trx_write_func()** - Передача данных на USRP, блокирующая если usrp_tx_thread = 0 и не блокирующая если usrp_tx_thread = 1

### rx_rf()


### tx_rf()


